# æ—¥æ›† + ä»»å‹™ç®¡ç†ç³»çµ± - å®Œæ•´å°ˆæ¡ˆæ¶æ§‹

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

é€™æ˜¯ä¸€å€‹ä»¥**è¨˜äº‹ç‚ºæ ¸å¿ƒ**çš„æ—¥æ›†èˆ‡ä»»å‹™ç®¡ç†ç³»çµ±ï¼Œæ”¯æ´ç¶²é å’Œè¡Œå‹•è£ç½®ã€‚

### æ ¸å¿ƒæ¦‚å¿µ

1. **è¨˜äº‹æ˜¯ç¬¬ä¸€å…¬æ°‘**
   - æ¯ç­†è¨˜äº‹ç¨ç«‹å­˜åœ¨ï¼Œæ“æœ‰å®Œæ•´å±¬æ€§ï¼ˆæ™‚é–“ã€å…§å®¹ã€é™„ä»¶ï¼‰
   - è¨˜äº‹å¯é¸æ“‡æ€§åœ°åŠ å…¥ä»»å‹™ï¼Œå½¢æˆä»»å‹™ç¾¤çµ„
   - æ™‚é–“æ­¸å±¬æ–¼è¨˜äº‹ï¼Œè€Œéä»»å‹™

2. **ä¸‰ç¨®è¦–åœ–**
   - **æ—¥æ›†è¦–åœ–**ï¼šæŒ‰æ™‚é–“è»¸é¡¯ç¤ºè¨˜äº‹
   - **è¨˜äº‹è¦–åœ–**ï¼šåˆ—è¡¨å¼æŸ¥çœ‹æ‰€æœ‰è¨˜äº‹ï¼ˆå¯æ’åºã€ç¯©é¸ï¼‰
   - **ä»»å‹™è¦–åœ–**ï¼šçœ‹æ¿å¼ç®¡ç†ä»»å‹™åŠå…¶åŒ…å«çš„è¨˜äº‹

3. **éˆæ´»çš„çµ„ç¹”æ–¹å¼**
   - æœªæ’ç¨‹çš„è¨˜äº‹æ”¾åœ¨ã€Œæ”¶ä»¶åŒ£ã€
   - è¨˜äº‹å¯éš¨æ™‚åŠ å…¥/ç§»å‡ºä»»å‹™
   - ä»»å‹™åªæ˜¯è¨˜äº‹çš„å®¹å™¨ï¼Œä¸å¹²æ¶‰è¨˜äº‹çš„æ™‚é–“

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### å¾Œç«¯ï¼šPython + FastAPI

```
æŠ€è¡“æ£§ï¼š
â”œâ”€â”€ FastAPI           # Web æ¡†æ¶
â”œâ”€â”€ SQLAlchemy 2.0    # ORMï¼ˆç•°æ­¥ï¼‰
â”œâ”€â”€ PostgreSQL 15     # è³‡æ–™åº«
â”œâ”€â”€ Redis 7           # å¿«å–
â”œâ”€â”€ WebSocket         # å³æ™‚åŒæ­¥
â””â”€â”€ Celery            # èƒŒæ™¯ä»»å‹™
```

### å‰ç«¯ï¼šReact + React Native

```
æŠ€è¡“æ£§ï¼š
â”œâ”€â”€ React (Next.js)      # ç¶²é ç‰ˆ
â”œâ”€â”€ React Native (Expo)  # è¡Œå‹•ç‰ˆ
â”œâ”€â”€ Zustand/Redux        # ç‹€æ…‹ç®¡ç†
â””â”€â”€ å…±ç”¨æ¥­å‹™é‚è¼¯å±¤
```

## ğŸ“ æª”æ¡ˆèªªæ˜

### è³‡æ–™åº«è¨­è¨ˆ
- `database_schema_v2_corrected.sql` - å®Œæ•´çš„ PostgreSQL è³‡æ–™åº«çµæ§‹
  - è¨˜äº‹è¡¨ (entries) - ç³»çµ±æ ¸å¿ƒ
  - ä»»å‹™è¡¨ (tasks) - è¨˜äº‹å®¹å™¨
  - é™„ä»¶ã€ç•™è¨€ã€é€šçŸ¥ç­‰ç›¸é—œè¡¨

### è¦–åœ–è¨­è¨ˆ
- `three_views_detailed.md` - ä¸‰ç¨®è¦–åœ–çš„è©³ç´°è¨­è¨ˆæ–‡ä»¶
  - æ—¥æ›†è¦–åœ–çš„äº’å‹•é‚è¼¯
  - è¨˜äº‹è¦–åœ–çš„æ’åºç¯©é¸
  - ä»»å‹™è¦–åœ–çš„çœ‹æ¿è¨­è¨ˆ

### Python å¾Œç«¯
- `python_backend/` - å®Œæ•´çš„ FastAPI å¾Œç«¯å°ˆæ¡ˆ
  - `app/main.py` - æ‡‰ç”¨ç¨‹å¼å…¥å£
  - `app/models/` - SQLAlchemy è³‡æ–™æ¨¡å‹
  - `app/schemas/` - Pydantic é©—è­‰æ¨¡å‹
  - `app/api/v1/` - RESTful API ç«¯é»
  - `app/core/websocket_manager.py` - WebSocket å³æ™‚åŒæ­¥
  - `requirements.txt` - Python ä¾è³´å¥—ä»¶
  - `docker-compose.yml` - Docker éƒ¨ç½²é…ç½®
  - `README.md` - å¿«é€Ÿé–‹å§‹æŒ‡å—

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å•Ÿå‹•å¾Œç«¯

```bash
cd python_backend

# ä½¿ç”¨ Dockerï¼ˆæ¨è–¦ï¼‰
docker-compose up -d

# åŸ·è¡Œè³‡æ–™åº«é·ç§»
docker-compose exec backend alembic upgrade head

# è¨ªå• API æ–‡æª”
# http://localhost:8000/api/docs
```

### 2. æ¸¬è©¦ API

```bash
# å»ºç«‹è¨˜äº‹
curl -X POST "http://localhost:8000/api/v1/entries" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "title": "åœ˜éšŠæœƒè­°",
    "content": "è¨è«– Q2 è¦åŠƒ",
    "entry_type": "event",
    "timestamp": "2024-03-15T14:00:00Z",
    "calendar_id": "YOUR_CALENDAR_ID"
  }'

# åˆ—å‡ºæœªæ’ç¨‹çš„è¨˜äº‹
curl "http://localhost:8000/api/v1/entries?calendar_id=xxx&has_timestamp=false"
```

### 3. WebSocket é€£æ¥

```javascript
const ws = new WebSocket(
  `ws://localhost:8000/ws/calendar/${calendarId}?token=${token}`
);

ws.onmessage = (event) => {
  const message = JSON.parse(event.data);
  console.log('æ”¶åˆ°æ›´æ–°:', message);
};
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å¯¦ç¾

### 1. è¨˜äº‹ç®¡ç†

```python
# å»ºç«‹ç¨ç«‹è¨˜äº‹
POST /api/v1/entries
{
  "title": "ç ”ç©¶æ–°æŠ€è¡“",
  "timestamp": null,  # æœªæ’ç¨‹
  "calendar_id": "xxx"
}

# å»ºç«‹æœ‰æ™‚é–“çš„è¨˜äº‹
POST /api/v1/entries
{
  "title": "å®¢æˆ¶æœƒè­°",
  "timestamp": "2024-03-15T14:00:00Z",
  "calendar_id": "xxx"
}
```

### 2. ä»»å‹™çµ„ç¹”

```python
# å»ºç«‹ä»»å‹™
POST /api/v1/tasks
{
  "title": "Q2 ç”¢å“è¦åŠƒ",
  "calendar_id": "xxx"
}

# å°‡è¨˜äº‹åŠ å…¥ä»»å‹™
POST /api/v1/entries/{entry_id}/add-to-task
{
  "task_id": "task_uuid"
}

# å¾ä»»å‹™ç§»é™¤è¨˜äº‹ï¼ˆè¨˜äº‹ä¿ç•™ï¼‰
POST /api/v1/entries/{entry_id}/remove-from-task
```

### 3. è¦–åœ–æŸ¥è©¢

```python
# æ—¥æ›†è¦–åœ–ï¼šå–å¾—æŸæœˆä»½çš„è¨˜äº‹
GET /api/v1/entries?calendar_id=xxx&start_date=2024-03-01&end_date=2024-03-31

# è¨˜äº‹è¦–åœ–ï¼šå–å¾—æœªæ’ç¨‹çš„è¨˜äº‹
GET /api/v1/entries?calendar_id=xxx&has_timestamp=false

# ä»»å‹™è¦–åœ–ï¼šå–å¾—ä»»å‹™åŠå…¶è¨˜äº‹
GET /api/v1/tasks/{task_id}
```

## ğŸ“Š è³‡æ–™æµç¨‹ç¯„ä¾‹

### å ´æ™¯ï¼šå¾æƒ³æ³•åˆ°åŸ·è¡Œ

```
1. å¿«é€Ÿè¨˜éŒ„æƒ³æ³•ï¼ˆè¨˜äº‹è¦–åœ–ï¼‰
   POST /entries {"title": "ç ”ç©¶ç«¶å“", "timestamp": null}
   â†’ è¨˜äº‹å­˜åœ¨æ–¼ã€Œæœªæ’ç¨‹ã€å€åŸŸ

2. çµ„ç¹”æˆä»»å‹™ï¼ˆè¨˜äº‹è¦–åœ– â†’ æ‹–æ›³ï¼‰
   POST /tasks {"title": "Q2 ç”¢å“æ”¹ç‰ˆ"}
   POST /entries/{id}/add-to-task {"task_id": "xxx"}
   â†’ è¨˜äº‹åŠ å…¥ä»»å‹™

3. å®‰æ’æ™‚é–“ï¼ˆæ—¥æ›†è¦–åœ– â†’ æ‹–æ›³ï¼‰
   PATCH /entries/{id} {"timestamp": "2024-03-20T10:00:00Z"}
   â†’ è¨˜äº‹é¡¯ç¤ºåœ¨æ—¥æ›†ä¸Š

4. å³æ™‚åŒæ­¥ï¼ˆWebSocketï¼‰
   â†’ å…¶ä»–ç”¨æˆ¶ç«‹å³çœ‹åˆ°è®Šæ›´
```

## ğŸ”‘ é—œéµè¨­è¨ˆæ±ºç­–

### 1. ç‚ºä»€éº¼ä»»å‹™æ²’æœ‰æ™‚é–“æˆ³ï¼Ÿ

```
âœ… å„ªé»ï¼š
- è¨˜äº‹å¯ä»¥ç¨ç«‹å­˜åœ¨
- ä»»å‹™å…§çš„è¨˜äº‹å¯ä»¥æœ‰ä¸åŒæ™‚é–“
- æ›´ç¬¦åˆçœŸå¯¦å·¥ä½œæµç¨‹ï¼ˆå…ˆè¨˜éŒ„ï¼Œå¾Œçµ„ç¹”ï¼Œå†æ’ç¨‹ï¼‰

ç¯„ä¾‹ï¼š
ä»»å‹™ã€Œæº–å‚™ç™¼è¡¨æœƒã€
  â”œâ”€ è¨˜äº‹ã€Œè¨‚å ´åœ°ã€ (3/10)
  â”œâ”€ è¨˜äº‹ã€Œæº–å‚™ç°¡å ±ã€ (3/12)
  â””â”€ è¨˜äº‹ã€Œç™¼è¡¨æœƒã€ (3/15)

åœ¨æ—¥æ›†ä¸Šæœƒé¡¯ç¤º 3 å€‹ä¸åŒæ™‚é–“çš„è¨˜äº‹ï¼Œ
è€Œä¸æ˜¯åªé¡¯ç¤ºä¸€å€‹ä»»å‹™
```

### 2. ç‚ºä»€éº¼ä½¿ç”¨ FastAPIï¼Ÿ

```
âœ… å„ªé»ï¼š
- åŸç”Ÿç•°æ­¥æ”¯æ´ï¼ˆWebSocket æ•ˆèƒ½å¥½ï¼‰
- è‡ªå‹•ç”Ÿæˆ API æ–‡æª”
- é¡å‹æç¤ºå¸¶ä¾†æ›´å¥½çš„é–‹ç™¼é«”é©—
- æ•ˆèƒ½æ¥è¿‘ Node.js
- Python ç”Ÿæ…‹è±å¯Œï¼ˆæ•¸æ“šåˆ†æã€AI æ•´åˆå®¹æ˜“ï¼‰
```

### 3. ç‚ºä»€éº¼é¸æ“‡ React Nativeï¼Ÿ

```
âœ… å„ªé»ï¼š
- èˆ‡ React Web å…±ç”¨æ¥­å‹™é‚è¼¯
- ç¨‹å¼ç¢¼å…±ç”¨ç‡ 70-80%
- ç¤¾ç¾¤è³‡æºè±å¯Œ
- æ›´æ–°è¿­ä»£å¿«
```

## ğŸ“ˆ æœªä¾†æ“´å±•

### Phase 1 (å·²å®Œæˆè¨­è¨ˆ)
- âœ… è¨˜äº‹ CRUD
- âœ… ä»»å‹™ç®¡ç†
- âœ… ä¸‰ç¨®è¦–åœ–
- âœ… WebSocket åŒæ­¥
- âœ… åŸºç¤èªè­‰

### Phase 2 (å»ºè­°)
- ğŸ”² æ¨™ç±¤ç³»çµ±å¢å¼·
- ğŸ”² æœå°‹åŠŸèƒ½å„ªåŒ–
- ğŸ”² é‡è¤‡äº‹ä»¶
- ğŸ”² æª”æ¡ˆé™„ä»¶ä¸Šå‚³
- ğŸ”² ç•™è¨€è¨è«–

### Phase 3 (é€²éš)
- ğŸ”² AI æ™ºèƒ½å»ºè­°
- ğŸ”² èªéŸ³è¼¸å…¥
- ğŸ”² è‡ªç„¶èªè¨€è§£æ
- ğŸ”² åœ˜éšŠå”ä½œå¢å¼·
- ğŸ”² æ¨¡æ¿ç³»çµ±

## ğŸ› ï¸ é–‹ç™¼å»ºè­°

### 1. MVP é–‹ç™¼é †åºï¼ˆ12-16 é€±ï¼‰

```
Week 1-4ï¼šåŸºç¤æ¶æ§‹
- ç”¨æˆ¶ç³»çµ±
- è¨˜äº‹ CRUD
- è³‡æ–™åº«è¨­è¨ˆ

Week 5-8ï¼šæ ¸å¿ƒåŠŸèƒ½
- ä¸‰ç¨®è¦–åœ–
- ä»»å‹™ç³»çµ±
- åŸºæœ¬åŒæ­¥

Week 9-12ï¼šå”ä½œåŠŸèƒ½
- WebSocket å³æ™‚åŒæ­¥
- æ¨æ’­é€šçŸ¥
- æ¬Šé™ç®¡ç†

Week 13-16ï¼šå„ªåŒ–
- æ•ˆèƒ½å„ªåŒ–
- é›¢ç·šæ”¯æ´
- UI/UX æ”¹é€²
```

### 2. æ¸¬è©¦ç­–ç•¥

```python
# å–®å…ƒæ¸¬è©¦
pytest tests/test_entries.py
pytest tests/test_tasks.py

# æ•´åˆæ¸¬è©¦
pytest tests/test_api.py

# æ•ˆèƒ½æ¸¬è©¦
locust -f tests/load_test.py
```

### 3. éƒ¨ç½²å»ºè­°

```bash
# é–‹ç™¼ç’°å¢ƒ
docker-compose up -d

# ç”Ÿç”¢ç’°å¢ƒ
- ä½¿ç”¨ Kubernetes æˆ– Docker Swarm
- PostgreSQL ä¸»å¾è¤‡è£½
- Redis Cluster
- Nginx åå‘ä»£ç†
- Let's Encrypt SSL
```

## ğŸ“š ç›¸é—œæ–‡ä»¶

1. `database_schema_v2_corrected.sql` - è³‡æ–™åº«å®Œæ•´è¨­è¨ˆ
2. `three_views_detailed.md` - UI/UX è©³ç´°è¨­è¨ˆ
3. `python_backend/README.md` - å¾Œç«¯å¿«é€Ÿé–‹å§‹
4. `python_backend/app/` - å®Œæ•´çš„ç¨‹å¼ç¢¼å¯¦ä½œ

## ğŸ’¡ é‡è¦æé†’

1. **è¨˜äº‹å„ªå…ˆ**ï¼šæ‰€æœ‰è¨­è¨ˆéƒ½åœç¹è¨˜äº‹å±•é–‹
2. **æ™‚é–“æ­¸å±¬**ï¼šåªæœ‰è¨˜äº‹æœ‰æ™‚é–“æˆ³ï¼Œä»»å‹™æ²’æœ‰
3. **éˆæ´»çµ„ç¹”**ï¼šè¨˜äº‹å¯ä»¥è‡ªç”±ç§»å‹•å’Œé‡çµ„
4. **å³æ™‚åŒæ­¥**ï¼šä½¿ç”¨ WebSocket ç¢ºä¿å¤šäººå”ä½œé †æš¢

## ğŸ¤ é–‹ç™¼æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œå¯åƒè€ƒï¼š
- FastAPI æ–‡æª”: https://fastapi.tiangolo.com
- SQLAlchemy æ–‡æª”: https://docs.sqlalchemy.org
- React Native æ–‡æª”: https://reactnative.dev

---

**å°ˆæ¡ˆç‹€æ…‹**ï¼šæ¶æ§‹è¨­è¨ˆå®Œæˆ âœ… | å¾Œç«¯å¯¦ä½œç¯„ä¾‹å®Œæˆ âœ… | æº–å‚™é–‹å§‹é–‹ç™¼ ğŸš€
