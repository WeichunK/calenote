# ä¸‰è¦–åœ–ç³»çµ±è©³ç´°è¨­è¨ˆ

## è¦–åœ– 1: æ—¥æ›†è¦–åœ– (Calendar View)
**æŸ¥è©¢é‚è¼¯ï¼šé¡¯ç¤ºæ‰€æœ‰æœ‰ timestamp çš„è¨˜äº‹**

### è³‡æ–™æŸ¥è©¢
```sql
-- å–å¾—æŸæœˆä»½çš„æ‰€æœ‰è¨˜äº‹
SELECT * FROM calendar_view
WHERE timestamp >= '2024-03-01' 
  AND timestamp < '2024-04-01'
  AND calendar_id = :calendar_id;
```

### é¡¯ç¤ºé‚è¼¯
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        2024å¹´ 3æœˆ                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸€  äºŒ  ä¸‰  å››  äº”  å…­  æ—¥          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                1   2   3           â”‚
â”‚                    ğŸ”µ å®¢æˆ¶æœƒè­°      â”‚ â† entry_type=event
â”‚                    âœ“ å®Œæˆå ±å‘Š       â”‚ â† entry_type=task, is_completed=true
â”‚ 4   5   6   7   8   9   10         â”‚
â”‚ ğŸ“ ç ”ç©¶ç­†è¨˜                        â”‚ â† entry_type=note
â”‚     ğŸ“¦ æº–å‚™ç™¼è¡¨æœƒ                  â”‚ â† é€™æ˜¯ä¸€å€‹ Taskï¼Œé¡¯ç¤ºæ‘˜è¦
â”‚        (3/5 å®Œæˆ)                  â”‚
â”‚                                    â”‚
â”‚ 11  12  13  14  15  16  17        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœ–ä¾‹ï¼š
ğŸ”µ = äº‹ä»¶ (event)
âœ“  = å·²å®Œæˆçš„ä»»å‹™
â˜  = æœªå®Œæˆçš„ä»»å‹™
ğŸ“ = ä¸€èˆ¬è¨˜äº‹
ğŸ“¦ = ä»»å‹™ç¾¤çµ„ï¼ˆæœƒé¡¯ç¤ºå®Œæˆåº¦ï¼‰
```

### äº’å‹•è¡Œç‚º
```javascript
// é»æ“Šæ—¥æœŸæ ¼å­ â†’ å¿«é€Ÿæ–°å¢è¨˜äº‹
onClick(date) {
  showQuickEntry({
    defaultTimestamp: date,
    placeholder: "å¿«é€Ÿè¨˜äº‹..."
  });
}

// é»æ“Šè¨˜äº‹ â†’ é¡¯ç¤ºè©³æƒ… Popover
onClick(entry) {
  if (entry.task_id) {
    // å¦‚æœå±¬æ–¼ä»»å‹™ï¼Œé¡¯ç¤ºå®Œæ•´ä»»å‹™ä¸Šä¸‹æ–‡
    showTaskPopover(entry.task_id, highlightEntryId: entry.id);
  } else {
    // ä¸€èˆ¬è¨˜äº‹ï¼Œé¡¯ç¤ºç°¡å–®ç·¨è¼¯ç•Œé¢
    showEntryEditor(entry.id);
  }
}

// æ‹–æ›³è¨˜äº‹ â†’ æ”¹è®Šæ™‚é–“
onDrag(entry, newDate) {
  updateEntry(entry.id, { timestamp: newDate });
}

// æŒ‰éˆ•ï¼šåˆ‡æ›åˆ°è¨˜äº‹è¦–åœ–
switchToEntryView() {
  router.push('/entries', { 
    filter: { date: currentSelectedDate } 
  });
}
```

### ç‰¹æ®Šè™•ç†ï¼šä»»å‹™åœ¨æ—¥æ›†ä¸­çš„é¡¯ç¤º
```
ç•¶ä»»å‹™æœ¬èº«æœ‰ timestamp æ™‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ æº–å‚™ç”¢å“ç™¼è¡¨æœƒ      â”‚ â† ä»»å‹™æ¨™é¡Œ
â”‚ â° 3/15 14:00         â”‚
â”‚ â–¶ å±•é–‹æŸ¥çœ‹ 5 å€‹é …ç›®    â”‚ â† é»æ“Šå±•é–‹/æ”¶åˆ
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ âœ“ è¨‚å ´åœ°               â”‚ â† ä»»å‹™å…§çš„è¨˜äº‹
â”‚ âœ“ æº–å‚™ç°¡å ±             â”‚
â”‚ â˜ æ¸¬è©¦è¨­å‚™             â”‚
â”‚ â˜ å°è£½ DM              â”‚
â”‚ â˜ è¯çµ¡åª’é«”             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é»æ“Šä»»å‹™æ¨™é¡Œ â†’ åˆ‡æ›åˆ°ä»»å‹™è¦–åœ–ï¼Œä¸¦èšç„¦è©²ä»»å‹™
```

---

## è¦–åœ– 2: è¨˜äº‹è¦–åœ– (Entries View)
**æŸ¥è©¢é‚è¼¯ï¼šé¡¯ç¤ºæ‰€æœ‰è¨˜äº‹ï¼ˆå¯æ’åºã€ç¯©é¸ï¼‰**

### è³‡æ–™æŸ¥è©¢
```sql
-- åŸºæœ¬æŸ¥è©¢ï¼ˆå¯æ’åºï¼‰
SELECT * FROM entries
WHERE calendar_id = :calendar_id
ORDER BY 
  CASE :sort_by
    WHEN 'created' THEN created_at
    WHEN 'timestamp' THEN COALESCE(timestamp, created_at)
    WHEN 'title' THEN title
    WHEN 'priority' THEN priority
  END DESC;

-- é€²éšç¯©é¸
SELECT * FROM entries
WHERE calendar_id = :calendar_id
  AND (:filter_type IS NULL OR entry_type = :filter_type)
  AND (:filter_completed IS NULL OR is_completed = :filter_completed)
  AND (:filter_has_time IS NULL OR (timestamp IS NOT NULL) = :filter_has_time)
  AND (:filter_task IS NULL OR task_id = :filter_task)
  AND (:search IS NULL OR title ILIKE '%' || :search || '%');
```

### ä½ˆå±€è¨­è¨ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” æœå°‹  [æ’åºï¼šå‰µå»ºæ™‚é–“ â–¼] [ç¯©é¸ âš™ï¸]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚ ğŸ“¥ æœªæ’ç¨‹ (12)                             â”‚ â† å¯æŠ˜ç–Šå€åŸŸ
â”‚ â”œâ”€ â˜ ç ”ç©¶ç«¶å“åˆ†æ                         â”‚
â”‚ â”œâ”€ â˜ è¯çµ¡ä¾›æ‡‰å•†                           â”‚
â”‚ â”œâ”€ ğŸ“ ç”¢å“éˆæ„Ÿç­†è¨˜                        â”‚
â”‚ â””â”€ â˜ æº–å‚™æœˆæœƒè³‡æ–™                         â”‚
â”‚                                            â”‚
â”‚ ğŸ“… æœ¬é€± (8)                               â”‚
â”‚ â”œâ”€ 3/11 (ä¸€)                              â”‚
â”‚ â”‚   â˜ 09:00 åœ˜éšŠæ™¨æœƒ                     â”‚
â”‚ â”‚   ğŸ“ 14:00 å°ˆæ¡ˆè¨è«–ç­†è¨˜                 â”‚
â”‚ â”œâ”€ 3/12 (äºŒ)                              â”‚
â”‚ â”‚   âœ“ 10:00 å®Œæˆéœ€æ±‚æ–‡ä»¶                 â”‚
â”‚ â”‚   â˜ 15:00 å®¢æˆ¶é›»è©±                     â”‚
â”‚ â””â”€ ...                                    â”‚
â”‚                                            â”‚
â”‚ ğŸ“¦ ä»»å‹™ (3)                               â”‚ â† æ‰€æœ‰ä»»å‹™çš„æ‘˜è¦
â”‚ â”œâ”€ æº–å‚™ç”¢å“ç™¼è¡¨æœƒ (3/5)                   â”‚
â”‚ â”œâ”€ Q1 å ±å‘Šæº–å‚™ (7/10)                     â”‚
â”‚ â””â”€ æ‹›å‹Ÿæ–°äºº (1/4)                         â”‚
â”‚                                            â”‚
â”‚ ğŸ“ ä¸€èˆ¬è¨˜äº‹ (15)                          â”‚
â”‚ â”œâ”€ æœƒè­°è¨˜éŒ„ - ç”¢å“è¦åŠƒ                    â”‚
â”‚ â”œâ”€ æŠ€è¡“ç ”ç©¶ï¼šReact 19 æ–°åŠŸèƒ½              â”‚
â”‚ â””â”€ ...                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ’åºé¸é …
```javascript
const sortOptions = [
  { value: 'created', label: 'å‰µå»ºæ™‚é–“' },
  { value: 'timestamp', label: 'æ™‚é–“æˆ³' },
  { value: 'title', label: 'åç¨±' },
  { value: 'priority', label: 'å„ªå…ˆç´š' },
  { value: 'updated', label: 'æœ€å¾Œä¿®æ”¹' }
];

// æ™ºèƒ½åˆ†çµ„
const groupOptions = [
  { value: 'none', label: 'ä¸åˆ†çµ„' },
  { value: 'date', label: 'ä¾æ—¥æœŸ' },       // ä»Šå¤©ã€æœ¬é€±ã€æœ¬æœˆ...
  { value: 'type', label: 'ä¾é¡å‹' },       // äº‹ä»¶ã€ä»»å‹™ã€è¨˜äº‹
  { value: 'task', label: 'ä¾ä»»å‹™' },       // é¡¯ç¤ºä»»å‹™ > è¨˜äº‹çš„éšå±¤
  { value: 'status', label: 'ä¾ç‹€æ…‹' },     // å¾…è™•ç†ã€é€²è¡Œä¸­ã€å·²å®Œæˆ
  { value: 'tag', label: 'ä¾æ¨™ç±¤' }         // å·¥ä½œã€å€‹äººã€å­¸ç¿’...
];
```

### å¿«é€Ÿå‹•ä½œ
```
æ¯å€‹è¨˜äº‹é …ç›®çš„å¿«é€Ÿå‹•ä½œï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜ ç ”ç©¶ç«¶å“åˆ†æ               â”‚ â† é»æ“Šæ‰“å‹¾/å–æ¶ˆæ‰“å‹¾
â”‚   ğŸ“… --                      â”‚ â† é»æ“Šè¨­å®šæ™‚é–“
â”‚   ğŸ·ï¸ å·¥ä½œ                    â”‚ â† é»æ“Šç·¨è¼¯æ¨™ç±¤
â”‚   [â‹¯] â† æ›´å¤šé¸é …             â”‚
â”‚      â”œâ”€ ğŸ“Œ åŠ å…¥ä»»å‹™...       â”‚
â”‚      â”œâ”€ ğŸ¨ æ”¹è®Šé¡è‰²          â”‚
â”‚      â”œâ”€ ğŸ”” è¨­å®šæé†’          â”‚
â”‚      â”œâ”€ ğŸ“‹ è¤‡è£½              â”‚
â”‚      â””â”€ ğŸ—‘ï¸ åˆªé™¤              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰¹æ¬¡æ“ä½œ
```javascript
// å¤šé¸æ¨¡å¼
const [selectedEntries, setSelectedEntries] = useState([]);

// æ‰¹æ¬¡å‹•ä½œ
const batchActions = {
  addToTask: () => {
    // å°‡é¸ä¸­çš„è¨˜äº‹åŠ å…¥ç¾æœ‰ä»»å‹™æˆ–å»ºç«‹æ–°ä»»å‹™
    showTaskSelector(selectedEntries);
  },
  setTimestamp: () => {
    // æ‰¹æ¬¡è¨­å®šæ™‚é–“
    showDatePicker(selectedEntries);
  },
  addTags: () => {
    // æ‰¹æ¬¡åŠ æ¨™ç±¤
    showTagEditor(selectedEntries);
  },
  delete: () => {
    // æ‰¹æ¬¡åˆªé™¤
    confirmDelete(selectedEntries);
  }
};
```

---

## è¦–åœ– 3: ä»»å‹™è¦–åœ– (Tasks View)
**æŸ¥è©¢é‚è¼¯ï¼šé¡¯ç¤ºæ‰€æœ‰ä»»å‹™åŠå…¶åŒ…å«çš„è¨˜äº‹**

### è³‡æ–™æŸ¥è©¢
```sql
-- å–å¾—æ‰€æœ‰ä»»å‹™åŠå…¶è¨˜äº‹
SELECT 
  t.*,
  json_agg(
    json_build_object(
      'id', e.id,
      'title', e.title,
      'is_completed', e.is_completed,
      'timestamp', e.timestamp,
      'entry_type', e.entry_type
    ) ORDER BY e.position_in_task
  ) as entries
FROM tasks t
LEFT JOIN entries e ON t.id = e.task_id
WHERE t.calendar_id = :calendar_id
  AND t.status = 'active'
GROUP BY t.id
ORDER BY 
  CASE 
    WHEN t.timestamp IS NOT NULL THEN 0 
    ELSE 1 
  END,
  t.timestamp NULLS LAST,
  t.created_at DESC;
```

### ä½ˆå±€è¨­è¨ˆï¼ˆçœ‹æ¿å¼ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [+ æ–°å¢ä»»å‹™]  [æ’åº â–¼]  [é¡¯ç¤ºå·²å®Œæˆ â˜]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚ â”‚ ğŸ“¦ æº–å‚™ç”¢å“ç™¼è¡¨æœƒ            â”‚ â† ä»»å‹™å¡ç‰‡            â”‚
â”‚ â”‚ â° 3/15 14:00               â”‚                       â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚                       â”‚
â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘ 60% (3/5)        â”‚ â† é€²åº¦æ¢             â”‚
â”‚ â”‚                              â”‚                       â”‚
â”‚ â”‚ âœ“ è¨‚å ´åœ° (3/11)             â”‚ â† è¨˜äº‹åˆ—è¡¨           â”‚
â”‚ â”‚ âœ“ æº–å‚™ç°¡å ± (3/12)           â”‚                       â”‚
â”‚ â”‚ â˜ æ¸¬è©¦è¨­å‚™                  â”‚                       â”‚
â”‚ â”‚ â˜ å°è£½ DM                   â”‚                       â”‚
â”‚ â”‚ â˜ è¯çµ¡åª’é«”                  â”‚                       â”‚
â”‚ â”‚                              â”‚                       â”‚
â”‚ â”‚ [å±•é–‹è©³æƒ…] [+ æ–°å¢é …ç›®]      â”‚                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚ â”‚ ğŸ“¦ Q1 å ±å‘Šæº–å‚™               â”‚                       â”‚
â”‚ â”‚ â° 3/31 --                  â”‚                       â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚                       â”‚
â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘ 70% (7/10)       â”‚                       â”‚
â”‚ â”‚ ...                          â”‚                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»»å‹™å¡ç‰‡å±•é–‹å¾Œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ æº–å‚™ç”¢å“ç™¼è¡¨æœƒ                            â”‚
â”‚ â° 2024/3/15 14:00 - 16:00                  â”‚
â”‚ ğŸ“ æœƒè­°å®¤ A                                  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                              â”‚
â”‚ ğŸ“ ä»»å‹™èªªæ˜                                  â”‚
â”‚ é€™æ˜¯å…¬å¸å¹´åº¦æœ€é‡è¦çš„ç”¢å“ç™¼è¡¨æœƒï¼Œéœ€è¦ç¢ºä¿     â”‚
â”‚ æ‰€æœ‰ç´°ç¯€éƒ½å®Œç¾åŸ·è¡Œ...                        â”‚
â”‚                                              â”‚
â”‚ âœ… è¨˜äº‹æ¸…å–®                                  â”‚
â”‚ [+ å¿«é€Ÿæ–°å¢é …ç›®]                             â”‚
â”‚                                              â”‚
â”‚ âœ“ è¨‚å ´åœ°                          3/11      â”‚ â† å¯æ‹–æ›³æ’åº
â”‚   â””â”€ å·²ç¢ºèªå¯å®¹ç´ 50 äºº                     â”‚
â”‚                                              â”‚
â”‚ âœ“ æº–å‚™ç°¡å ±                        3/12      â”‚
â”‚   ğŸ–¼ï¸ [ç°¡å ±æª”æ¡ˆ.pptx]                        â”‚
â”‚                                              â”‚
â”‚ â˜ æ¸¬è©¦æŠ•å½±è¨­å‚™                    --        â”‚
â”‚   â””â”€ æå‰ä¸€å¤©åˆ°å ´æ¸¬è©¦                       â”‚
â”‚                                              â”‚
â”‚ â˜ å°è£½å®£å‚³ DM                     --        â”‚
â”‚   â˜ ç¢ºèªè¨­è¨ˆç¨¿          â† å¯åµŒå¥—å­é …ç›®      â”‚
â”‚   â˜ é€å°                                    â”‚
â”‚   â˜ åˆ°è²¨é©—æ”¶                                â”‚
â”‚                                              â”‚
â”‚ â˜ è¯çµ¡åª’é«”                        --        â”‚
â”‚   @å¼µä¸‰ è² è²¬                                â”‚
â”‚                                              â”‚
â”‚ ğŸ’¬ è¨è«– (2)                                 â”‚
â”‚ ğŸ“ é™„ä»¶ (1)                                 â”‚
â”‚                                              â”‚
â”‚ [æ­¸æª”ä»»å‹™] [åˆªé™¤]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»»å‹™çš„ç‰¹æ®Šæ“ä½œ
```javascript
// 1. å¾ä»»å‹™ä¸­ç§»é™¤è¨˜äº‹ï¼ˆä½†ä¸åˆªé™¤ï¼‰
removeEntryFromTask(entryId) {
  updateEntry(entryId, { 
    task_id: null, 
    position_in_task: null 
  });
  // è¨˜äº‹æœƒå›åˆ°ã€Œä¸€èˆ¬è¨˜äº‹ã€å€åŸŸ
}

// 2. å®Œæˆæ•´å€‹ä»»å‹™
completeTask(taskId) {
  // å¯é¸ï¼šåŒæ™‚æ¨™è¨˜æ‰€æœ‰æœªå®Œæˆçš„è¨˜äº‹ç‚ºå®Œæˆ
  const action = confirm('æ˜¯å¦åŒæ™‚å®Œæˆæ‰€æœ‰å¾…è¾¦é …ç›®ï¼Ÿ');
  
  if (action === 'complete_all') {
    markAllEntriesCompleted(taskId);
  }
  
  updateTask(taskId, { 
    status: 'completed',
    completed_at: new Date() 
  });
}

// 3. ä»»å‹™ç¯„æœ¬
const taskTemplates = {
  meeting: {
    title: 'æœƒè­°',
    defaultEntries: [
      'ç¢ºèªè­°ç¨‹',
      'é è¨‚æœƒè­°å®¤',
      'ç™¼é€æœƒè­°é‚€è«‹',
      'æº–å‚™æœƒè­°è³‡æ–™',
      'æœƒè­°è¨˜éŒ„'
    ]
  },
  project: {
    title: 'å°ˆæ¡ˆ',
    defaultEntries: [
      'éœ€æ±‚åˆ†æ',
      'æŠ€è¡“è©•ä¼°',
      'æ™‚ç¨‹è¦åŠƒ',
      'è³‡æºåˆ†é…',
      'åŸ·è¡Œè¿½è¹¤'
    ]
  }
};
```

---

## è¦–åœ–é–“çš„ç„¡ç¸«åˆ‡æ›

### åˆ‡æ›é‚è¼¯
```javascript
// å¾æ—¥æ›†åˆ‡åˆ°è¨˜äº‹è¦–åœ–
calendarView.onClick(entry) => {
  router.push('/entries', {
    filter: { entryId: entry.id },
    action: 'edit'
  });
}

// å¾æ—¥æ›†åˆ‡åˆ°ä»»å‹™è¦–åœ–
calendarView.onClick(task) => {
  router.push('/tasks', {
    filter: { taskId: task.id },
    action: 'expand'
  });
}

// å¾è¨˜äº‹åˆ‡åˆ°æ—¥æ›†
entryView.showInCalendar(entry) => {
  router.push('/calendar', {
    date: entry.timestamp || entry.created_at,
    highlight: entry.id
  });
}

// å¾ä»»å‹™åˆ‡åˆ°æ—¥æ›†
taskView.showInCalendar(task) => {
  router.push('/calendar', {
    date: task.timestamp,
    highlight: task.id
  });
}
```

### ä¸Šä¸‹æ–‡ä¿æŒ
```javascript
// å…¨å±€ç‹€æ…‹ç®¡ç†
const AppContext = {
  // ç•¶å‰è¦–åœ–
  currentView: 'calendar' | 'entries' | 'tasks',
  
  // è¦–åœ–ç‹€æ…‹
  calendarState: {
    selectedDate: Date,
    viewMode: 'month' | 'week' | 'day'
  },
  
  entryState: {
    sortBy: 'created' | 'timestamp' | 'title',
    groupBy: 'date' | 'type' | 'task',
    filters: { ... }
  },
  
  taskState: {
    expandedTasks: Set<TaskID>
  },
  
  // é¸ä¸­çš„é …ç›®ï¼ˆè·¨è¦–åœ–ä¿æŒï¼‰
  selectedEntry: EntryID | null,
  selectedTask: TaskID | null
};
```

---

## æœå°‹èˆ‡ç¯©é¸ï¼ˆå…¨å±€åŠŸèƒ½ï¼‰

### å…¨å±€æœå°‹
```javascript
// Cmd/Ctrl + K è§¸ç™¼
const globalSearch = {
  placeholder: "æœå°‹è¨˜äº‹ã€ä»»å‹™ã€æ¨™ç±¤...",
  
  searchFields: [
    'entry.title',
    'entry.content',
    'task.title',
    'task.description',
    'tags',
    'comments.content'
  ],
  
  results: {
    entries: [...],
    tasks: [...],
    tags: [...]
  },
  
  // çµæœå¯ç›´æ¥è·³è½‰
  onSelect(result) {
    if (result.type === 'entry') {
      jumpToEntry(result.id);
    } else if (result.type === 'task') {
      jumpToTask(result.id);
    }
  }
};
```

### æ™ºèƒ½ç¯©é¸
```javascript
// è‡ªç„¶èªè¨€å¼ç¯©é¸
const smartFilters = [
  "ä»Šå¤©çš„äº‹",              // timestamp = today
  "æœªå®Œæˆçš„ä»»å‹™",           // entry_type=task AND is_completed=false
  "æ²’æœ‰æ™‚é–“çš„",            // timestamp IS NULL
  "é«˜å„ªå…ˆç´š",              // priority >= 2
  "#å·¥ä½œ",                 // tags LIKE '%å·¥ä½œ%'
  "@å¼µä¸‰",                 // assigned OR created_by = å¼µä¸‰
  "æœ€è¿‘7å¤©",               // created_at >= now() - 7 days
];
```
